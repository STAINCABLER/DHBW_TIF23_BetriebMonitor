# shellcheck shell=bash
# shellcheck disable=SC2034
# AlteBank Web3.0 Konfiguration
# Kopiere diese Datei zu ".env" und passe die Werte für deine Umgebung an.

# ================================================================
# 1) Sicherheits- & Zugriffstokens
# ================================================================
APP_SECRET_KEY=change_me            # Flask-Session-Secret (32+ Zeichen)
LEDGER_API_TOKEN=change_me          # Erwarteter Wert für X-Ledger-Token
AUTH_TRANS_TOKEN=                   # Erwarteter Wert für X-Auth-Trans-Token (optional)
USER_KEY_ENC_SECRET=                # Zusätzlicher Pepper für Private-Key-Verschlüsselung (optional)

# ================================================================
# 2) Bankidentität & Mandantenkontext
# ================================================================
INSTANCE_ID=bank-stuttgart          # Eindeutige Kennung der Instanz
BANK_NAME=AlteBank Web3.0           # Anzeigename der Bank
BANK_PUBLIC_KEY=BANK_SYSTEM         # Öffentlicher Bankschlüssel
FQDN_ALTEBANK=alte-bank.ptb.ltm-labs.de

# ================================================================
# 3) Netzwerk, Routing & Basis-URLs
# ================================================================
PUBLIC_BASE_URL=                    # Volle URL, überschreibt Schema/Host/Port (optional)
CONTROL_BASE_URL=                   # Abweichende Control-URL (optional)
PUBLIC_BASE_SCHEME=https            # Fallback-Schema (http|https)
PUBLIC_HOST=                        # Fallback-Host; leer lässt automatische Ermittlung zu
PUBLIC_PORT=8000                    # Öffentlicher Port (z. B. 443)
PORT=8000                           # Bind-Port des Flask-Servers
EXTERNAL_IP_OVERRIDE=127.0.0.1      # Statische IP, falls Lookup scheitert
EXTERNAL_IP_LOOKUP_ENDPOINTS=https://api.ipify.org,https://ifconfig.me/ip

# ================================================================
# 4) Sitzungen & Hintergrundjobs (Sekunden)
# ================================================================
SESSION_TTL_SECONDS=3600
SESSION_CLEANUP_INTERVAL_SECONDS=600
LEDGER_SYNC_INTERVAL_SECONDS=60
INSTANCE_HEARTBEAT_INTERVAL_SECONDS=120
INSTANCE_STALE_THRESHOLD_SECONDS=600
INSTANCE_STALE_GRACE_SECONDS=300
CONTROL_HEALTH_INTERVAL_SECONDS=60

# ================================================================
# 5) Föderation & Ledger-Sync (kommagetrennte Listen)
# Format: token@https://host oder https://host
# ================================================================
LEDGER_NODE_ADDRESSES=
LEDGER_SYNC_TARGETS=

# ================================================================
# 6) Datenhaltung & Speicher
# ================================================================
UPSTASH_REDIS_REST_URL=             # Upstash REST-URL (https://...)
UPSTASH_REDIS_REST_TOKEN=           # Passendes Upstash-Token
REDIS_URL=                          # Optional: rediss://:password@host:port (ableitbar für Upstash)

# ================================================================
# 7) Laufzeit, Debug & Sonstiges
# ================================================================
FLASK_ENV=development               # development | production
FLASK_DEBUG=0                       # 0 | 1 bzw. false | true
INSTANCE_TLS_DIR=./data/tls         # Persistentes TLS-Verzeichnis (für Container-Workflows)